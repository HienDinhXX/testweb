<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qu·∫£n l√Ω t√†i s·∫£n</title>
<style>
body {
  font-family: -apple-system, sans-serif;
  background: #f2f2f7;
  padding: 20px;
}
.card {
  background: white;
  padding: 15px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  margin-bottom: 20px;
}
input {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
}
button {
  padding: 6px 10px;
  margin-top: 5px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}
.addBtn { background:#007AFF; color:white; width:100%; }
.editBtn { background:#ff9500; color:white; }
.deleteBtn { background:#ff3b30; color:white; }
.item {
  padding: 8px 0;
  border-bottom: 1px solid #eee;
}
.total {
  font-size: 20px;
  font-weight: bold;
}
</style>
</head>
<body>

<div class="card">
<h2>ü•á V√†ng</h2>

<input type="text" id="goldName" placeholder="T√™n c·ª≠a h√†ng">
<input type="number" id="goldQty" placeholder="S·ªë l∆∞·ª£ng">
<input type="number" id="goldPrice" placeholder="ƒê∆°n gi√° (VND)">
<button class="addBtn" onclick="addGold()">Th√™m v√†ng</button>

<div id="goldList"></div>
</div>

<div class="card">
<h2>üè¶ S·ªï ti·∫øt ki·ªám c·ª©ng</h2>

<input type="text" id="bankName" placeholder="T√™n ng√¢n h√†ng">
<input type="number" id="bankAmount" placeholder="S·ªë ti·ªÅn (VND)">
<button class="addBtn" onclick="addBank()">Th√™m ng√¢n h√†ng</button>

<div id="bankList"></div>
</div>

<div class="card">
<h2>üí≥ S·ªï ti·∫øt ki·ªám online</h2>
<input type="number" id="onlineAmount" placeholder="S·ªë ti·ªÅn (VND)">
</div>

<div class="card total" id="grandTotal">
T·ªïng t√†i s·∫£n: 0 VND
</div>

<script>
let golds = [];
let banks = [];

function saveData(){
  localStorage.setItem("golds", JSON.stringify(golds));
  localStorage.setItem("banks", JSON.stringify(banks));
  localStorage.setItem("online", onlineAmount.value);
}

function loadData(){
  golds = JSON.parse(localStorage.getItem("golds")) || [];
  banks = JSON.parse(localStorage.getItem("banks")) || [];
  onlineAmount.value = localStorage.getItem("online") || "";
  render();
}

function addGold(){
  if(!goldName.value || !goldQty.value || !goldPrice.value) return;
  golds.push({
    name: goldName.value,
    qty: Number(goldQty.value),
    price: Number(goldPrice.value)
  });
  goldName.value="";
  goldQty.value="";
  goldPrice.value="";
  render();
  saveData();
}

function addBank(){
  if(!bankName.value || !bankAmount.value) return;
  banks.push({
    name: bankName.value,
    amount: Number(bankAmount.value)
  });
  bankName.value="";
  bankAmount.value="";
  render();
  saveData();
}

function editGold(index){
  let g = golds[index];
  let newName = prompt("T√™n c·ª≠a h√†ng:", g.name);
  let newQty = prompt("S·ªë l∆∞·ª£ng:", g.qty);
  let newPrice = prompt("ƒê∆°n gi√°:", g.price);
  if(newName && newQty && newPrice){
    golds[index] = {
      name:newName,
      qty:Number(newQty),
      price:Number(newPrice)
    };
    render();
    saveData();
  }
}

function deleteGold(index){
  if(confirm("Xo√° m·ª•c n√†y?")){
    golds.splice(index,1);
    render();
    saveData();
  }
}

function editBank(index){
  let b = banks[index];
  let newName = prompt("T√™n ng√¢n h√†ng:", b.name);
  let newAmount = prompt("S·ªë ti·ªÅn:", b.amount);
  if(newName && newAmount){
    banks[index] = {
      name:newName,
      amount:Number(newAmount)
    };
    render();
    saveData();
  }
}

function deleteBank(index){
  if(confirm("Xo√° m·ª•c n√†y?")){
    banks.splice(index,1);
    render();
    saveData();
  }
}

function render(){
  let goldHTML="";
  let goldTotal=0;

  golds.forEach((g,i)=>{
    let total=g.qty*g.price;
    goldTotal+=total;
    goldHTML+=`
    <div class="item">
      ${g.name} - ${g.qty} √ó ${g.price.toLocaleString()} = ${total.toLocaleString()} VND
      <br>
      <button class="editBtn" onclick="editGold(${i})">S·ª≠a</button>
      <button class="deleteBtn" onclick="deleteGold(${i})">Xo√°</button>
    </div>`;
  });

  goldList.innerHTML=goldHTML;

  let bankHTML="";
  let bankTotal=0;

  banks.forEach((b,i)=>{
    bankTotal+=b.amount;
    bankHTML+=`
    <div class="item">
      ${b.name} - ${b.amount.toLocaleString()} VND
      <br>
      <button class="editBtn" onclick="editBank(${i})">S·ª≠a</button>
      <button class="deleteBtn" onclick="deleteBank(${i})">Xo√°</button>
    </div>`;
  });

  bankList.innerHTML=bankHTML;

  let online=Number(onlineAmount.value)||0;
  let totalAll=goldTotal+bankTotal+online;

  grandTotal.innerText="T·ªïng t√†i s·∫£n: "+totalAll.toLocaleString()+" VND";
}

onlineAmount.addEventListener("input",()=>{
  render();
  saveData();
});

window.onload=loadData;
</script>

</body>
</html>
