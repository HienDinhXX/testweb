<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qu·∫£n l√Ω t√†i s·∫£n</title>
<style>
body {
  font-family: -apple-system, sans-serif;
  background: #f2f2f7;
  padding: 15px;
  font-size: 14px;
}
.card {
  background: white;
  padding: 12px;
  border-radius: 12px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.05);
  margin-bottom: 15px;
}
h2 {
  font-size: 16px;
  margin-bottom: 8px;
}
input {
  width: 100%;
  padding: 6px;
  margin: 5px 0;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
}
button {
  padding: 5px 8px;
  margin-top: 5px;
  border-radius: 6px;
  border: none;
  font-size: 12px;
}
.addBtn { background:#007AFF; color:white; width:100%; }
.editBtn { background:#ff9500; color:white; }
.deleteBtn { background:#ff3b30; color:white; }
.item {
  padding: 6px 0;
  border-bottom: 1px solid #eee;
  font-size: 13px;
}
.total {
  font-size: 16px;
  font-weight: bold;
}
</style>
</head>
<body>

<div class="card">
<h2>ü•á V√†ng (ƒë∆°n v·ªã: ch·ªâ)</h2>

<label>ƒê∆°n gi√° v√†ng (VND)</label>
<input type="text" id="goldPrice" placeholder="Nh·∫≠p ƒë∆°n gi√°">

<hr>

<input type="text" id="goldName" placeholder="T√™n c·ª≠a h√†ng">
<input type="number" id="goldQty" placeholder="S·ªë l∆∞·ª£ng (ch·ªâ)">
<button class="addBtn" onclick="addGold()">Th√™m v√†ng</button>

<div id="goldList"></div>
</div>

<div class="card">
<h2>üè¶ S·ªï ti·∫øt ki·ªám c·ª©ng</h2>

<input type="text" id="bankName" placeholder="T√™n ng√¢n h√†ng">
<input type="text" id="bankAmount" placeholder="S·ªë ti·ªÅn (VND)">
<button class="addBtn" onclick="addBank()">Th√™m ng√¢n h√†ng</button>

<div id="bankList"></div>
</div>

<div class="card">
<h2>üí≥ S·ªï ti·∫øt ki·ªám online</h2>
<input type="text" id="onlineAmount" placeholder="S·ªë ti·ªÅn (VND)">
</div>

<div class="card total" id="grandTotal">
T·ªïng t√†i s·∫£n: 0 VND
</div>

<script>
let golds = [];
let banks = [];

function formatNumber(num){
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

function parseNumber(str){
  return Number(str.replace(/\./g,"")) || 0;
}

function saveData(){
  localStorage.setItem("golds", JSON.stringify(golds));
  localStorage.setItem("banks", JSON.stringify(banks));
  localStorage.setItem("goldPrice", goldPrice.value);
  localStorage.setItem("online", onlineAmount.value);
}

function loadData(){
  golds = JSON.parse(localStorage.getItem("golds")) || [];
  banks = JSON.parse(localStorage.getItem("banks")) || [];
  goldPrice.value = localStorage.getItem("goldPrice") || "";
  onlineAmount.value = localStorage.getItem("online") || "";
  render();
}

function addGold(){
  if(!goldName.value || !goldQty.value) return;
  golds.push({
    name: goldName.value,
    qty: Number(goldQty.value)
  });
  goldName.value="";
  goldQty.value="";
  render();
  saveData();
}

function addBank(){
  if(!bankName.value || !bankAmount.value) return;
  banks.push({
    name: bankName.value,
    amount: parseNumber(bankAmount.value)
  });
  bankName.value="";
  bankAmount.value="";
  render();
  saveData();
}

function editGold(index){
  let g = golds[index];
  let newName = prompt("T√™n c·ª≠a h√†ng:", g.name);
  let newQty = prompt("S·ªë l∆∞·ª£ng (ch·ªâ):", g.qty);
  if(newName && newQty){
    golds[index] = {
      name:newName,
      qty:Number(newQty)
    };
    render();
    saveData();
  }
}

function deleteGold(index){
  if(confirm("Xo√° m·ª•c n√†y?")){
    golds.splice(index,1);
    render();
    saveData();
  }
}

function editBank(index){
  let b = banks[index];
  let newName = prompt("T√™n ng√¢n h√†ng:", b.name);
  let newAmount = prompt("S·ªë ti·ªÅn:", formatNumber(b.amount));
  if(newName && newAmount){
    banks[index] = {
      name:newName,
      amount:parseNumber(newAmount)
    };
    render();
    saveData();
  }
}

function deleteBank(index){
  if(confirm("Xo√° m·ª•c n√†y?")){
    banks.splice(index,1);
    render();
    saveData();
  }
}

function render(){
  let price = parseNumber(goldPrice.value);
  goldPrice.value = price ? formatNumber(price) : "";

  let goldHTML="";
  let goldTotal=0;

  golds.forEach((g,i)=>{
    let total=g.qty*price;
    goldTotal+=total;
    goldHTML+=`
    <div class="item">
      ${g.name} - ${g.qty} ch·ªâ √ó ${formatNumber(price)} = ${formatNumber(total)} VND
      <br>
      <button class="editBtn" onclick="editGold(${i})">S·ª≠a</button>
      <button class="deleteBtn" onclick="deleteGold(${i})">Xo√°</button>
    </div>`;
  });

  goldList.innerHTML=goldHTML;

  let bankHTML="";
  let bankTotal=0;

  banks.forEach((b,i)=>{
    bankTotal+=b.amount;
    bankHTML+=`
    <div class="item">
      ${b.name} - ${formatNumber(b.amount)} VND
      <br>
      <button class="editBtn" onclick="editBank(${i})">S·ª≠a</button>
      <button class="deleteBtn" onclick="deleteBank(${i})">Xo√°</button>
    </div>`;
  });

  bankList.innerHTML=bankHTML;

  let online=parseNumber(onlineAmount.value);
  onlineAmount.value = online ? formatNumber(online) : "";

  let totalAll=goldTotal+bankTotal+online;

  grandTotal.innerText="T·ªïng t√†i s·∫£n: "+formatNumber(totalAll)+" VND";
}

goldPrice.addEventListener("input", render);
onlineAmount.addEventListener("input", render);

window.onload=loadData;
</script>

</body>
</html>
